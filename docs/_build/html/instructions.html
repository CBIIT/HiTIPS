<!DOCTYPE html>

<html lang="python" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Instructions &#8212; HiTIPS 0.1.22 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=61cd365c" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=c2113480"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="hitips package" href="hitips.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="instructions">
<h1>Instructions<a class="headerlink" href="#instructions" title="Link to this heading">¶</a></h1>
<p><strong>HiTIPS</strong> (High-Throughput Image Processing Software) is a comprehensive tool crafted for the analysis of high-throughput imaging datasets. Specifically designed for FISH (Fluorescence In Situ Hybridization) data, HiTIPS incorporates cutting-edge image processing and machine learning algorithms, delivering automated solutions for cell and nucleus segmentation, FISH signal identification, and quantification of signal attributes.</p>
<section id="key-features">
<h2>Key Features<a class="headerlink" href="#key-features" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Automated Segmentation</strong>: Efficiently segments cells and nuclei.</p></li>
<li><p><strong>FISH Signal Identification</strong>: Accurate localization and identification of FISH signals.</p></li>
<li><p><strong>Quantitative Analysis</strong>: Measures signal intensity and distribution.</p></li>
<li><p><strong>Customizable Interface</strong>: Provides flexibility for customization and integrating plugins.</p></li>
<li><p><strong>High-Throughput Support</strong>: Designed for processing large-scale imaging datasets.</p></li>
<li><p><strong>Extendable Algorithms</strong>: Incorporates new methodologies for enhancing current analysis routines.</p></li>
<li><p><strong>Plugin Support</strong>: Supports the creation and integration of new analysis routines.</p></li>
</ul>
</section>
<section id="hardware-and-software-prerequisites">
<h2>Hardware and Software Prerequisites<a class="headerlink" href="#hardware-and-software-prerequisites" title="Link to this heading">¶</a></h2>
<section id="hardware-requirements">
<h3>Hardware Requirements<a class="headerlink" href="#hardware-requirements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>CPU</strong>: Multi-core processor (e.g., Intel i7 or AMD Ryzen 7).</p></li>
<li><p><strong>RAM</strong>: Minimum 16GB (32GB recommended for large datasets).</p></li>
<li><p><strong>Storage</strong>: SSD with 500GB or more of available space.</p></li>
<li><p><strong>GPU</strong>: Optional but recommended, especially if using CUDA-enhanced functionalities.</p></li>
</ul>
</section>
<section id="software-requirements">
<h3>Software Requirements<a class="headerlink" href="#software-requirements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Operating System</strong>: 64-bit Linux distribution (e.g., Ubuntu, CentOS, Fedora).</p></li>
<li><p><strong>Python</strong>: Version 3.7 or newer.</p></li>
<li><p><strong>Package Manager</strong>: Latest version of <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a> or <a class="reference external" href="https://www.anaconda.com/products/distribution">Anaconda</a>.</p></li>
</ul>
</section>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<section id="using-conda-and-pip">
<h3>Using Conda and Pip<a class="headerlink" href="#using-conda-and-pip" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p><strong>Create a Conda Environment</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">hitips_env</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.8</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">hitips_env</span>
</pre></div>
</div>
</li>
<li><p><strong>Install HiTIPS</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">hitips</span>
</pre></div>
</div>
</li>
<li><p><strong>Launch HiTIPS</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hitips</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="hitips-user-interface">
<h2>HiTIPS user interface<a class="headerlink" href="#hitips-user-interface" title="Link to this heading">¶</a></h2>
<p>HiTIPS unser interface consists of two windows: one for displaying the image and realtime results of cell and spots segmentation, and the other one for image and dataset loading, image selection for display and selecting analsysis parameters as well as running the analysis.</p>
<img alt="User Interface" class="align-center" src="_images/user_interface.png" />
</section>
<section id="data-loading-from-cellvoyager">
<h2>Data loading from CellVoyager<a class="headerlink" href="#data-loading-from-cellvoyager" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>From “Input Output” tab click on “Load MetaData” button.</p></li>
<li><p>Using the “Select Metadata Files…” window navigate into the folder containing all the images and metadata saved by the instrument.</p></li>
<li><p>You should only see the file “MeasurementData.mlf”. Select this file and click ”Open”.</p></li>
</ul>
<img alt="Metadata Loading" class="align-center" src="_images/metadata_loading.png" />
</section>
<section id="loading-plate-information-from-cellvoyager">
<h2>Loading plate information from CellVoyager<a class="headerlink" href="#loading-plate-information-from-cellvoyager" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Once the plate information is loaded in HiTIPS you should see the “pixel size” value under device label and the ”Display” checkbox is active.</p></li>
</ul>
<img alt="Display Checkbox" class="align-center" src="_images/display_checkbox.png" />
<ul>
<li><p>Now check the “Display” checkbox to see all the wells containing images with their corresponding fields (FOV), Z planes and time points (Time).</p>
<p>-- The color of wells containing image data on the well-plate layout will change to green now.</p>
<p>-- To view other images you can click on the well, field, z-plane or timepoint of interest.</p>
<p>-- This should also load the first image of the dataset into the display window.</p>
</li>
</ul>
<img alt="Image Selection" class="align-center" src="_images/image_selection.png" />
</section>
<section id="loading-bioformat-image-files">
<h2>Loading Bioformat image files<a class="headerlink" href="#loading-bioformat-image-files" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>From “Input Output” tab click on “Load Images” button</p></li>
</ul>
<img alt="Load Bioformat" class="align-center" src="_images/load_bioformat.png" />
<ul class="simple">
<li><p>Using the “Select Image Files…” window navigate into the folder containing all the images (ome.tiff, czi, nd2, ims, etc.) and select all the images required to be analyzed.</p></li>
</ul>
<img alt="Select Bioformat" class="align-center" src="_images/select_bioformat.png" />
</section>
<section id="image-display-window">
<h2>Image Display window<a class="headerlink" href="#image-display-window" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>After loading plate information and checking display checkbox all the active channels in the dataset will be active and the channel information will be displayed next to the channel name.</p></li>
<li><p>You can also check the “Max.Z” checkbox for each channel to display the maximum projection of the Z-stack.</p></li>
</ul>
<img alt="Display Window" class="align-center" src="_images/display_window.png" />
<ul class="simple">
<li><p>You can select the color of the channel by right-clicking on text next to its checkbox and selecting the color from the dropdown menu.</p></li>
</ul>
</section>
<section id="adjusting-channel-intensities">
<h2>Adjusting channel intensities<a class="headerlink" href="#adjusting-channel-intensities" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Up to five channels can be displayed in displayed and the display intensity can be separately adjusted for each channel separately.</p></li>
</ul>
<img alt="Image Channels" class="align-center" src="_images/image_channels.png" />
<ul>
<li><p>You can adjust the intensity of each channel by selecting the specific channel from the combobox under the image and using the right slider to set the maximum intensity and left slider to set the minimum intensity of the image.</p>
<p>-- Note: adjusting the image intensity on the display window will not change the input image intensities for processing algorithms (nuclei segmentation, spot detection, etc.). These algorithms read and process the raw data.</p>
</li>
</ul>
<img alt="Intensity Adjustment" class="align-center" src="_images/intensity_adjustment.png" />
</section>
<section id="visualizing-nuclei-segmentation-results">
<h2>Visualizing nuclei segmentation results<a class="headerlink" href="#visualizing-nuclei-segmentation-results" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>To visualize the nuclei segmentation results, check the “Nuclei” checkbox on the right side of the display window.</p></li>
<li><p>From the combobox under this checkbox you can select how you would like to visualize the segmentation results. You can select nuclei boundary, area or the nuclei index. The examples are shown below.</p></li>
</ul>
<img alt="Nuclei Segmentation" class="align-center" src="_images/nuclei_segmentation.png" />
</section>
<section id="visualizing-spot-detection-results">
<h2>Visualizing spot detection results<a class="headerlink" href="#visualizing-spot-detection-results" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>To visualize the spot detection results, check the “Spots” checkbox on the right side of the display window.</p></li>
<li><p>From the combobox under this checkbox you can select how you would like to visualize the spot detection results results. You can select circles around spots or spot boundary.</p></li>
</ul>
<img alt="Spot Image" class="align-center" src="_images/spot_image.png" />
</section>
<section id="nuclei-detection-parameter-setting">
<h2>Nuclei Detection Parameter Setting<a class="headerlink" href="#nuclei-detection-parameter-setting" title="Link to this heading">¶</a></h2>
<p>The effect of changing any of the parameters in this toolbox can be observed on display window in real-time to achieve the best possible result.</p>
<ul>
<li><p>Channel: for selecting the channel containing nuclei stain to run nuclei segmentation.</p></li>
<li><p>Method: for selecting nuclei segmentation method from: Int.-based, Marker Controlled, CellPose-CPU, CellPose-GPU, DeepCell.</p>
<p>-- Note: the first three methods don’t require GPU for processing but the last two methods require GPU for segmentation.</p>
</li>
<li><p>Detection: Increasing the value of this slider will increase the chance of detecting the nuclei with lower intensity. It might also add noise to segmentation, so choosing the proper value is important.</p></li>
<li><p>Separation: increasing this value would help separating attached nuclei but very high values can result in over segmentation.</p>
<p>-- Note: Detection and separation sliders are only read but first two segmentation methods (Int.-based and Marker Controlled) and have no effect on other methods.</p>
</li>
<li><p>Area: estimated area of an average nuclei in the dataset (µm²)</p>
<p>-- Note: if you are using CellPose, sometimes very high values leads to better results.</p>
</li>
<li><p>Remove Boundary Nuclei: checking this checkbox will eliminate the nuclei touching the boundary of the image to make sure all the detected nuclei are intact.</p></li>
<li><p>MaxZ Projection: by checking this checkbox, the nuclei segmentation algorithm will run on the maximally projection of the Z-planes.</p>
<p>-- Note: if the 2D segmentation of the nuclei is required make sure this chechbox is checked, since it will highly improve 2D segmentation results.</p>
</li>
</ul>
<img alt="Nuclei Detection Parameters" class="align-center" src="_images/nuc_detection_parameters.png" />
</section>
<section id="spot-channels">
<h2>Spot Channels<a class="headerlink" href="#spot-channels" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Channels checkboxes: Using these checkboxes you can select the channels containing spots.</p></li>
<li><p>Coordinates: you can select the location on the spot as the defining point of the spot.</p>
<p>-- CenterOfMass: weighted average of all the pixels on each segmented spot. The weights are pixels intensity.</p>
<p>-- MaxIntensity: location of brightest pixel on the segmented spot.</p>
<p>-- Centroid: average of all the pixels on each segmented spot. Similar to first CenterOfMass, but all the weights are equal to 1.</p>
</li>
<li><p>Max z-projection: by checking this checkbox, the spot detection algorithm will run on the maximally projection of the Z-planes.</p>
<p>-- Note: for achieving best results make sure this chechbox is checked, since it will highly improve the detection of spots in 2D and the Z location will be returned as location of a plane containing the maximum intensity.</p>
</li>
</ul>
<img alt="Spot Channels" class="align-center" src="_images/spot_channels.png" />
</section>
<section id="spot-detection-method">
<h2>Spot Detection Method<a class="headerlink" href="#spot-detection-method" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Channel: If different algorithms or parameters require for different spot channels you can select that specific channel and adjust rest of the parameters for that channel. Otherwise you can choose “All” to use the same parameters for all channels.</p></li>
<li><p>Detection Method: for selecting spot detection method from:</p>
<p>-- Laplacian of Gaussian: fits an LOG kernel to every pixel.</p>
<p>-- Gaussian: fits a Gaussian kernel to every pixel.</p>
<p>-- Intensity Threshold: segmenting spots usingintensity thresholding.</p>
<p>-- Enhanced LOG: A combination of first two methods.</p>
</li>
<li><p>Threshold Method: for selecting the thresholding method after kernel fitting:</p>
<p>-- Auto: for using Otsu’s thresholding method for separating spots from background.</p>
<p>-- Manual: for setting the threshold manually to separate spots from background.</p>
<p>-- Note: Auto thresholding would not work well if you choose Gaussian kernel. A comparison of these methods can be found in slides Appendix 2.</p>
</li>
<li><p>Threshold Value: set the threshold for spot segmentation after kernel fitting. This threshold will only be applied when the “Threshold Method” is set to “Manual”.</p></li>
<li><p>Kernel Size: to set the kernel size for Gaussian and LOG methods. A smaller value makes the algorithm more sensitive to detect spots but may result in many false positives. Higher values would result in less false positives but may not be sensitive enough to detect all true positives. This value should be set according to dataset while observing the results.</p></li>
</ul>
<img alt="Spot Detection Method" class="align-center" src="_images/spot_detection_method.png" />
</section>
<section id="nuclei-and-spot-tracking">
<h2>Nuclei and Spot Tracking<a class="headerlink" href="#nuclei-and-spot-tracking" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Nuclei Tracking: for selecting nuclei tracking method. Currently there are two options: Bayesian and DeepCell.</p></li>
<li><p>Nuc Search Radius (Pix): the radius of search for Bayesian method in pixels. It is recommended to use the default value(100). If the accuracy of tracking not satisfactory, you can reduce or increase this value.</p></li>
<li><p>Spot search Radius (pix): maximum displacement for the spot to be considered the same for intial clustering of the spots.</p></li>
<li><p>Secondary Spot Search Radius: maximum displacement for the spot to be considered the same for retrospective assignment of the spots.</p>
<dl class="simple">
<dt>-- Note: Both these methods will be applied after aligment of the spots over time. So the nuceli movement and rotation don't need to be considered for adjusting</dt><dd><p>these parameters.</p>
</dd>
</dl>
</li>
<li><p>Min Track Length (Frames): Do not include the nuclei that have been tracked less than this value in the results.</p></li>
<li><p>Track Registration Method: You can currently choose between 'Phase Correlation' (Default) and 'Intensity Based' registration methods.
The 'Intensity Based' registration approach has been proven to work better when cells shape changes during along the movement on their trajectory, however, large frame-to-frame intensity variations can introduce angle shift or translation in the registration results. On the other hand, the 'Phase Correlation' is more robust to intensity change and less robust to frame-to-frame shape deformation.</p></li>
<li><p>Fitting Method: For choosing the the method to fit a two or three state HMM model to the intensity of the tracked spots.</p></li>
<li><p>Max Spots Per Cell: In a tracked nuclei, if for one frame more spots are detected than this value due to the background noise, that frame will be ignored for spot tracking.</p></li>
<li><p>Min Burst Duration (frames): Remove that spots from analysis, if they are only present in less number of frames than this value. This will also help remving the background noise detected in a smallnumber of frames due to background noise.</p></li>
<li><p>Patch Size (pix): Size of image image patch for saving the nuclei time stacks.</p></li>
</ul>
<img alt="Nuclei Spot Tracking" class="align-center" src="_images/nuc_spot_tracking.png" />
</section>
<section id="results">
<h2>Results<a class="headerlink" href="#results" title="Link to this heading">¶</a></h2>
<p>This tab included the resutls that are needed to be saved after the analysis is done.</p>
<ul class="simple">
<li><p>Nuclei Mask: this will save the binary mask images for the channel selected as nuclei.</p></li>
<li><p>Nuclei Info: this will save all information related to each nuclei in the dataset (location, shape information, intensity etc.).</p></li>
<li><p>Spots Location: this will save all information related to each spot in the dataset.</p></li>
<li><p>Cell Tracking: this will save all images and results table for every tracked nuclei.</p></li>
<li><p>Spot Tracking: this will save all images and results table for every tracked spot in the dataset.</p></li>
</ul>
<p>-Note if you need to save Nuclei or Spot tracking results, all the boxes need to be checked.</p>
<img alt="Results" class="align-center" src="_images/results.png" />
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">HiTIPS</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="modules.html">hitips</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#key-features">Key Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hardware-and-software-prerequisites">Hardware and Software Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hitips-user-interface">HiTIPS user interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-loading-from-cellvoyager">Data loading from CellVoyager</a></li>
<li class="toctree-l2"><a class="reference internal" href="#loading-plate-information-from-cellvoyager">Loading plate information from CellVoyager</a></li>
<li class="toctree-l2"><a class="reference internal" href="#loading-bioformat-image-files">Loading Bioformat image files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#image-display-window">Image Display window</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adjusting-channel-intensities">Adjusting channel intensities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualizing-nuclei-segmentation-results">Visualizing nuclei segmentation results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualizing-spot-detection-results">Visualizing spot detection results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nuclei-detection-parameter-setting">Nuclei Detection Parameter Setting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spot-channels">Spot Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spot-detection-method">Spot Detection Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nuclei-and-spot-tracking">Nuclei and Spot Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="#results">Results</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="hitips.html" title="previous chapter">hitips package</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Adib Keikhosravi.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/instructions.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>